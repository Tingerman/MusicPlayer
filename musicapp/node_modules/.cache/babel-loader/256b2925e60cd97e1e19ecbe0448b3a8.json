{"ast":null,"code":"import { onMounted } from 'vue';\nimport { searchMusic } from '@/api/index.js';\nexport default {\n  props: ['playlist'],\n  // setup(props){\n  //     onMounted(()=>console.log(\"listviewtop的传值成功了没？\",props.playlist))\n  // }\n  data: () => {\n    return {\n      placeholder: \"Racheal Yamagata\",\n      keywordList: ['杨千嬅', '方大同'],\n      searchKeyword: '',\n      searchSongs: []\n    };\n  },\n\n  beforeMount() {\n    localStorage.keywordList = \"\";\n    console.log(\"localStorage\", localStorage.keywordList);\n    this.keywordList = localStorage.keywordList ? JSON.parse(localStorage.keywordList) : this.keywordList;\n  },\n\n  methods: {\n    saveKeyword: async function () {\n      this.keywordList.push(this.searchKeyword);\n      localStorage.keywordList = JSON.stringify(this.keywordList);\n      let result = await searchMusic(this.searchKeyword);\n      console.log(\"search result:\", result);\n      this.searchKeyword = '';\n    },\n\n    clearStorage() {\n      localStorage.keywordList = \"\";\n      this.keywordList = [];\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAwIA,SAASA,SAAT,QAA0B,KAA1B;AACA,SAAQC,WAAR,QAA0B,gBAA1B;AAEA,eAAe;EACXC,KAAK,EAAC,CAAC,UAAD,CADK;EAEX;EACA;EACA;EACAC,IAAI,EAAC,MAAI;IACL,OAAM;MACFC,WAAW,EAAC,kBADV;MAEFC,WAAW,EAAC,CAAC,KAAD,EAAO,KAAP,CAFV;MAGFC,aAAa,EAAC,EAHZ;MAIFC,WAAW,EAAC;IAJV,CAAN;EAMH,CAZU;;EAaXC,WAAW,GAAE;IACTC,YAAY,CAACJ,WAAb,GAAyB,EAAzB;IACAK,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA2BF,YAAY,CAACJ,WAAxC;IACA,KAAKA,WAAL,GAAiBI,YAAY,CAACJ,WAAb,GAA0BO,IAAI,CAACC,KAAL,CAAWJ,YAAY,CAACJ,WAAxB,CAA1B,GAA+D,KAAKA,WAArF;EACH,CAjBU;;EAkBXS,OAAO,EAAC;IACJC,WAAW,EAAC,kBAAgB;MACxB,KAAKV,WAAL,CAAiBW,IAAjB,CAAsB,KAAKV,aAA3B;MACAG,YAAY,CAACJ,WAAb,GAAyBO,IAAI,CAACK,SAAL,CAAe,KAAKZ,WAApB,CAAzB;MACA,IAAIa,MAAM,GAAC,MAAMjB,WAAW,CAAC,KAAKK,aAAN,CAA5B;MACAI,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA6BO,MAA7B;MACA,KAAKZ,aAAL,GAAmB,EAAnB;IACH,CAPG;;IAQJa,YAAY,GAAE;MACXV,YAAY,CAACJ,WAAb,GAAyB,EAAzB;MACA,KAAKA,WAAL,GAAiB,EAAjB;IACH;;EAXI;AAlBG,CAAf","names":["onMounted","searchMusic","props","data","placeholder","keywordList","searchKeyword","searchSongs","beforeMount","localStorage","console","log","JSON","parse","methods","saveKeyword","push","stringify","result","clearStorage"],"sourceRoot":"","sources":["/Users/wangmanting/Desktop/云e办/音乐播放器vue项目/musicapp/src/components/SearchTop.vue"],"sourcesContent":["<template>\n    <div class=\"searchTop\">\n        <div class=\"searchTopNav\">\n            <div class=\"back\" @click=\"$router.go(-1)\">\n                <svg class=\"icon\" aria-hidden=\"true\">\n                    <use xlink:href=\"#icon-guanbi\"></use>\n                </svg>\n            </div>\n            <div class=\"inputbox\">\n                <input type=\"text\" v-model=\"searchKeyword\" :placeholder=\"placeholder\" @keydown.enter=\"saveKeyword\">\n            </div>\n\n            <div class=\"right\" @click=\"saveKeyword\">\n                <svg class=\"icon search\" aria-hidden=\"true\">\n                    <use xlink:href=\"#icon-sousuoxiao\"></use>\n                </svg>\n            </div>\n\n        </div>\n\n        <div class=\"history\">\n            <div class=\"historyLeft\">历史</div>\n            <div class=\"historyRight\">\n                <div class=\"keywordItem\" v-for=\"(item,i) in keywordList\" :key=\"i\">{{item}}</div>\n                <div class=\"clearbtn\" @click=\"clearStorage\">清空历史</div>\n            </div>\n        </div>\n\n                <div class=\"list\">\n            <div class=\"playItem\" v-for=\"(item,i) in playlist.tracks\" :key=\"i\">\n                <div class=\"left\" @click=\"setPlayIndex(i)\">\n                    <div class=\"index\">{{i+1}}</div>\n                    <div class=\"content\">\n                        <div class=\"title\">{{item.name}}</div>\n                        <div class=\"author\">\n                            <!-- <span class=\"tag\" v-for=\"(tag,index) in playlist.tags\" :key=\"index\">{{tag}}</span> -->\n                            <!-- <span>{{item.al.name}}</span> -->\n                            {{item.ar[0].name}} · {{item.al.name}}\n                        </div>\n                    </div>\n                </div>\n                <div class=\"right\">\n                    <svg class=\"icon play\" aria-hidden=\"true\" @click=\"setPlayIndex(i)\">\n                        <use xlink:href=\"#icon-24gl-playCircle\"></use>\n                    </svg> \n                    <svg class=\"icon more\" aria-hidden=\"true\">\n                        <use xlink:href=\"#icon-diandiandianshu\"></use>\n                    </svg>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style lang=\"less\">\n.searchTop{\n    width:7.5rem;\n    padding:0 0.4rem;\n    // height:6rem;\n\n    .searchTopNav{\n        display:flex;\n        justify-content: start;\n        width: 100%;\n        height: 1.2rem;\n        align-items: center;\n        font-size: 0.35rem;\n        .icon{\n            width:0.4rem;\n            height: 0.4rem;\n            fill:#333;\n        }\n        .search{\n            margin-left: 0.3rem;\n        }\n        .inputbox{\n            width: 75%;\n            margin-left:0.3rem;\n            height: 0.6rem;\n            input{\n                border: none;\n                outline: none;\n                border-bottom: 1px solid #666;\n                width: 100%;\n                height: 0.5rem;\n            }\n        }\n\n    }\n    .history{\n        display: flex;\n        justify-content: start;\n        height: 0.6rem;\n        padding: 0 0.1rem;\n        flex-wrap: wrap; //自动换行\n        flex:1; //占据剩余宽度\n        .historyLeft{\n            width:1.1rem;\n            height: 0.6rem;\n            font-weight: 800;\n            display:flex;\n            align-items: center;\n            line-height: 0.6rem;\n        }\n        .historyRight{\n            color:#666;\n            display: flex;\n            align-items: center;\n            width: 70%;\n            flex-wrap: wrap; //自动换行\n            flex:1; //占据剩余宽度\n            .keywordItem{\n                display:flex;\n                background-color: #eee;\n                height: 0.55rem;\n                padding: 0 0.2rem;\n                align-items: center;\n                border-radius: 0.3rem;\n                font-size: 0.2rem;\n                margin:0 0.08rem 0.16rem 0.08rem;\n\n            }\n            .clearbtn{\n                font-size: 0.26rem;\n                color:#333;\n                margin:0.06rem 0rem 0.12rem 0.3rem;\n                text-decoration: underline;\n            }\n        }\n    }\n}\n\n</style>\n\n<script>\n\nimport { onMounted } from 'vue';\nimport {searchMusic} from '@/api/index.js'\n\nexport default {\n    props:['playlist'],\n    // setup(props){\n    //     onMounted(()=>console.log(\"listviewtop的传值成功了没？\",props.playlist))\n    // }\n    data:()=>{\n        return{\n            placeholder:\"Racheal Yamagata\",\n            keywordList:['杨千嬅','方大同'],\n            searchKeyword:'',\n            searchSongs:[],\n        }\n    },\n    beforeMount(){\n        localStorage.keywordList=\"\";\n        console.log(\"localStorage\",localStorage.keywordList)\n        this.keywordList=localStorage.keywordList? JSON.parse(localStorage.keywordList):this.keywordList;\n    },\n    methods:{\n        saveKeyword:async function(){\n            this.keywordList.push(this.searchKeyword);\n            localStorage.keywordList=JSON.stringify(this.keywordList);\n            let result=await searchMusic(this.searchKeyword);\n            console.log(\"search result:\",result)\n            this.searchKeyword='';\n        },\n        clearStorage(){\n           localStorage.keywordList=\"\"; \n           this.keywordList=[];\n        }\n    }\n}\n</script>"]},"metadata":{},"sourceType":"module"}