{"ast":null,"code":"import { createStore } from 'vuex';\nimport axios from 'axios';\nimport api from '@/api/index.js';\nimport { parseStringStyle } from '@vue/shared';\nexport default createStore({\n  //全局对象\n  state: {\n    playing: false,\n    playlist: [{\n      id: 167655,\n      name: \"幻听\",\n      al: {\n        id: 16932,\n        name: \"梦游计\",\n        pic: 109951166118946340,\n        picUrl: \"http://p3.music.126.net/ifjKrYPuGzRHlbVDNScQfA==/109951166118946328.jpg\",\n        pic_str: \"109951166118946328\"\n      }\n    }],\n    playCurrentIndex: 0,\n    lyric: '' // currentTime:0,\n    // intervalId:0,\n\n  },\n  getters: {\n    lyricList: function (state) {\n      let arr = state.lyric.split(/\\n/igs).map((item, i) => {\n        let min = parseInt(item.slice(1, 3));\n        let sec = parseInt(item.slice(4, 6));\n        let mill = parseInt(item.slice(7, item.indexOf(']')));\n        return {\n          min,\n          sec,\n          mill,\n          lyric: item.slice(item.indexOf(']') + 1),\n          item,\n          time: mill + sec * 1000 + min * 60 * 1000 // time:parseInt(mill)+parseInt(sec)*1000+parseInt(min)*60*1000\n\n        };\n      });\n      console.log(\"i_max\", arr.length - 1);\n      arr.forEach((item, i) => {\n        // if(i==arr.length-1){\n        if (i >= arr.length - 1 && (!arr[i + 1] || !arr[i + 1].lyric || !!arr[i + 1].lyric.length)) {\n          item.next = item.time + 4000;\n        } else item.next = arr[i + 1].time;\n      }); // console.log(arr)\n\n      return arr;\n    }\n  },\n  mutations: {\n    setPlaylist: function (state, value) {\n      //修改playlist，直接传值\n      state.playlist = value;\n    },\n\n    setPlayIndex(state, value) {\n      state.playCurrentIndex = value;\n      state.playing = true;\n    },\n\n    setLyric(state, value) {\n      state.lyric = value;\n    },\n\n    setCurrentTime(state, value) {\n      state.currentTime = value;\n    },\n\n    setPlayingStatus(state, value) {\n      state.playing = value;\n    }\n\n  },\n  actions: {\n    async reqLyric(content, payload) {\n      let result = await api.getLyric(payload.id);\n      content.commit('setLyric', result.data.lrc.lyric);\n      console.log(\"lyric:\", result.data.lrc.lyric);\n    } // UpdateTime(content){\n    //   content.state.id=setInterval(()=>{\n    //     content.commit('setCurrentTime',++content.state.currentTime)\n    //   },1000)\n    // }\n\n\n  },\n  modules: {}\n});","map":{"version":3,"names":["createStore","axios","api","parseStringStyle","state","playing","playlist","id","name","al","pic","picUrl","pic_str","playCurrentIndex","lyric","getters","lyricList","arr","split","map","item","i","min","parseInt","slice","sec","mill","indexOf","time","console","log","length","forEach","next","mutations","setPlaylist","value","setPlayIndex","setLyric","setCurrentTime","currentTime","setPlayingStatus","actions","reqLyric","content","payload","result","getLyric","commit","data","lrc","modules"],"sources":["/Users/wangmanting/Desktop/云e办/音乐播放器vue项目/musicapp/src/store/index.js"],"sourcesContent":["import { createStore } from 'vuex'\nimport axios from 'axios'\nimport api from '@/api/index.js'\nimport { parseStringStyle } from '@vue/shared'\n\nexport default createStore({\n  //全局对象\n  state: {\n    playing:false,\n    playlist:[{\n      id: 167655,\n      name: \"幻听\",\n      al:{id: 16932,\n      name: \"梦游计\",\n      pic: 109951166118946340,\n      picUrl: \"http://p3.music.126.net/ifjKrYPuGzRHlbVDNScQfA==/109951166118946328.jpg\",\n      pic_str: \"109951166118946328\"}\n    }],\n    playCurrentIndex:0,\n    lyric:'',\n    // currentTime:0,\n    // intervalId:0,\n  },\n  getters: {\n    lyricList:function(state){\n      let arr= state.lyric.split(/\\n/igs).map((item,i)=>{\n          let min=parseInt(item.slice(1,3));\n          let sec=parseInt(item.slice(4,6));\n          let mill=parseInt(item.slice(7,item.indexOf(']')));\n          return {\n            min,sec,mill,\n            lyric:item.slice(item.indexOf(']')+1),\n            item,\n            time:mill+sec*1000+min*60*1000\n            // time:parseInt(mill)+parseInt(sec)*1000+parseInt(min)*60*1000\n          }\n      })\n      console.log(\"i_max\",arr.length-1)\n      arr.forEach((item,i)=>{\n        // if(i==arr.length-1){\n        if(i>=arr.length-1 && (!arr[i+1] || !arr[i+1].lyric||!!arr[i+1].lyric.length)){\n          item.next=item.time+4000;\n        }\n        else item.next=arr[i+1].time;\n      })\n      // console.log(arr)\n      return arr;\n    }\n  },\n  mutations: {\n    setPlaylist:function(state,value){ //修改playlist，直接传值\n      state.playlist=value;\n    },\n    setPlayIndex(state,value){\n      state.playCurrentIndex=value;\n      state.playing=true;\n    },\n    setLyric(state,value){\n      state.lyric=value;\n    },\n    setCurrentTime(state,value){\n      state.currentTime=value;\n    },\n    setPlayingStatus(state,value){\n      state.playing=value;\n    }\n  },\n  actions: {\n    async reqLyric(content,payload){\n      let result=await api.getLyric(payload.id);\n      content.commit('setLyric',result.data.lrc.lyric);\n      console.log(\"lyric:\",result.data.lrc.lyric);\n    },\n    // UpdateTime(content){\n    //   content.state.id=setInterval(()=>{\n    //     content.commit('setCurrentTime',++content.state.currentTime)\n    //   },1000)\n    // }\n  },\n  modules: {\n  }\n})\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}