{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, vModelText as _vModelText, withKeys as _withKeys, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, vShow as _vShow, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"searchTop\"\n};\nconst _hoisted_2 = {\n  class: \"searchTopNav\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"svg\", {\n  class: \"icon\",\n  \"aria-hidden\": \"true\"\n}, [/*#__PURE__*/_createElementVNode(\"use\", {\n  \"xlink:href\": \"#icon-guanbi\"\n})], -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = [_hoisted_3];\nconst _hoisted_5 = {\n  class: \"inputbox\"\n};\nconst _hoisted_6 = [\"placeholder\"];\n\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"svg\", {\n  class: \"icon search\",\n  \"aria-hidden\": \"true\"\n}, [/*#__PURE__*/_createElementVNode(\"use\", {\n  \"xlink:href\": \"#icon-sousuoxiao\"\n})], -1\n/* HOISTED */\n);\n\nconst _hoisted_8 = [_hoisted_7];\nconst _hoisted_9 = {\n  class: \"history\"\n};\n\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"historyLeft\"\n}, \"历史\", -1\n/* HOISTED */\n);\n\nconst _hoisted_11 = {\n  class: \"historyRight\"\n};\nconst _hoisted_12 = [\"onClick\"];\nconst _hoisted_13 = {\n  class: \"list\"\n};\nconst _hoisted_14 = [\"onClick\"];\nconst _hoisted_15 = {\n  class: \"index\"\n};\nconst _hoisted_16 = {\n  class: \"content\"\n};\nconst _hoisted_17 = {\n  class: \"title\"\n};\nconst _hoisted_18 = {\n  class: \"author\"\n};\nconst _hoisted_19 = {\n  class: \"right\"\n};\nconst _hoisted_20 = [\"onClick\"];\n\nconst _hoisted_21 = /*#__PURE__*/_createElementVNode(\"use\", {\n  \"xlink:href\": \"#icon-24gl-playCircle\"\n}, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_22 = [_hoisted_21];\n\nconst _hoisted_23 = /*#__PURE__*/_createElementVNode(\"svg\", {\n  class: \"icon more\",\n  \"aria-hidden\": \"true\"\n}, [/*#__PURE__*/_createElementVNode(\"use\", {\n  \"xlink:href\": \"#icon-diandiandianshu\"\n})], -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", {\n    class: \"back\",\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.go(-1))\n  }, _hoisted_4), _createElementVNode(\"div\", _hoisted_5, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.searchKeyword = $event),\n    placeholder: _ctx.placeholder,\n    onKeydown: _cache[2] || (_cache[2] = _withKeys((...args) => $options.saveKeyword && $options.saveKeyword(...args), [\"enter\"]))\n  }, null, 40\n  /* PROPS, HYDRATE_EVENTS */\n  , _hoisted_6), [[_vModelText, _ctx.searchKeyword]])]), _createElementVNode(\"div\", {\n    class: \"right\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.saveKeyword && $options.saveKeyword(...args))\n  }, _hoisted_8)]), _withDirectives(_createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _createElementVNode(\"div\", _hoisted_11, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.keywordList, (item, i) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"keywordItem\",\n      key: i,\n      onClick: $event => _ctx.searchKeyword = item\n    }, _toDisplayString(item), 9\n    /* TEXT, PROPS */\n    , _hoisted_12);\n  }), 128\n  /* KEYED_FRAGMENT */\n  )), _createElementVNode(\"div\", {\n    class: \"clearbtn\",\n    onClick: _cache[4] || (_cache[4] = (...args) => $options.clearStorage && $options.clearStorage(...args))\n  }, \"清空历史\")])], 512\n  /* NEED_PATCH */\n  ), [[_vShow, _ctx.searchSongs.length == 0]]), _createElementVNode(\"div\", _hoisted_13, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.searchSongs, (item, i) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"playItem\",\n      key: i\n    }, [_createElementVNode(\"div\", {\n      class: \"left\",\n      onClick: $event => $options.setPlay(item)\n    }, [_createElementVNode(\"div\", _hoisted_15, _toDisplayString(i + 1), 1\n    /* TEXT */\n    ), _createElementVNode(\"div\", _hoisted_16, [_createElementVNode(\"div\", _hoisted_17, _toDisplayString(item.name), 1\n    /* TEXT */\n    ), _createElementVNode(\"div\", _hoisted_18, [_createCommentVNode(\" <span class=\\\"tag\\\" v-for=\\\"(tag,index) in searchSongs.tags\\\" :key=\\\"index\\\">{{tag}}</span> \"), _createCommentVNode(\" <span>{{item.al.name}}</span> \"), _createTextVNode(_toDisplayString(item.artists[0].name) + \" · \" + _toDisplayString(item.album.name), 1\n    /* TEXT */\n    )])])], 8\n    /* PROPS */\n    , _hoisted_14), _createElementVNode(\"div\", _hoisted_19, [(_openBlock(), _createElementBlock(\"svg\", {\n      class: \"icon play\",\n      \"aria-hidden\": \"true\",\n      onClick: $event => $options.setPlay(item)\n    }, _hoisted_22, 8\n    /* PROPS */\n    , _hoisted_20)), _hoisted_23])]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])]);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","_hoisted_3","_hoisted_7","_hoisted_21","_createElementBlock","onClick","_ctx","go","type","$event","placeholder","onKeydown","$options","_hoisted_10","_Fragment","_renderList","item","i","key","_hoisted_12","length","_toDisplayString","name","_createCommentVNode","artists","album","_hoisted_23"],"sourceRoot":"","sources":["/Users/wangmanting/Desktop/云e办/音乐播放器vue项目/musicapp/src/components/SearchTop.vue"],"sourcesContent":["<template>\n    <div class=\"searchTop\">\n        <div class=\"searchTopNav\">\n            <div class=\"back\" @click=\"$router.go(-1)\">\n                <svg class=\"icon\" aria-hidden=\"true\">\n                    <use xlink:href=\"#icon-guanbi\"></use>\n                </svg>\n            </div>\n            <div class=\"inputbox\">\n                <input type=\"text\" v-model=\"searchKeyword\" :placeholder=\"placeholder\" @keydown.enter=\"saveKeyword\">\n            </div>\n\n            <div class=\"right\" @click=\"saveKeyword\">\n                <svg class=\"icon search\" aria-hidden=\"true\">\n                    <use xlink:href=\"#icon-sousuoxiao\"></use>\n                </svg>\n            </div>\n\n        </div>\n\n        <div class=\"history\" v-show=\"searchSongs.length==0\">\n            <div class=\"historyLeft\">历史</div>\n            <div class=\"historyRight\">\n                <div class=\"keywordItem\" v-for=\"(item,i) in keywordList\" :key=\"i\" @click=\"searchKeyword=item\">{{item}}</div>\n                <div class=\"clearbtn\" @click=\"clearStorage\">清空历史</div>\n            </div>\n        </div>\n\n        <div class=\"list\">\n            <div class=\"playItem\" v-for=\"(item,i) in searchSongs\" :key=\"i\">\n                <div class=\"left\" @click=\"setPlay(item)\">\n                    <div class=\"index\">{{i+1}}</div>\n                    <div class=\"content\">\n                        <div class=\"title\">{{item.name}}</div>\n                        <div class=\"author\">\n                            <!-- <span class=\"tag\" v-for=\"(tag,index) in searchSongs.tags\" :key=\"index\">{{tag}}</span> -->\n                            <!-- <span>{{item.al.name}}</span> -->\n                            {{item.artists[0].name}} · {{item.album.name}}\n                        </div>\n                    </div>\n                </div>\n                <div class=\"right\">\n                    <svg class=\"icon play\" aria-hidden=\"true\" @click=\"setPlay(item)\">\n                        <use xlink:href=\"#icon-24gl-playCircle\"></use>\n                    </svg> \n                    <svg class=\"icon more\" aria-hidden=\"true\">\n                        <use xlink:href=\"#icon-diandiandianshu\"></use>\n                    </svg>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<style lang=\"less\">\n.searchTop{\n    width:7.5rem;\n    padding:0 0.4rem;\n    padding-top:0.2rem ;\n    // height:6rem;\n\n    .searchTopNav{\n        display:flex;\n        justify-content: start;\n        width: 100%;\n        height: 1.2rem;\n        align-items: center;\n        font-size: 0.35rem;\n        .icon{\n            width:0.4rem;\n            height: 0.4rem;\n            fill:#333;\n        }\n        .search{\n            margin-left: 0.3rem;\n        }\n        .inputbox{\n            width: 75%;\n            margin-left:0.3rem;\n            height: 0.6rem;\n            input{\n                border: none;\n                outline: none;\n                border-bottom: 1px solid #666;\n                width: 100%;\n                height: 0.5rem;\n            }\n        }\n\n    }\n    .history{\n        display: flex;\n        justify-content: start;\n        height: 0.6rem;\n        padding: 0 0.1rem;\n        flex-wrap: wrap; //自动换行\n        flex:1; //占据剩余宽度\n        .historyLeft{\n            width:1.1rem;\n            height: 0.6rem;\n            font-weight: 800;\n            display:flex;\n            align-items: center;\n            line-height: 0.6rem;\n        }\n        .historyRight{\n            color:#666;\n            display: flex;\n            align-items: center;\n            width: 70%;\n            flex-wrap: wrap; //自动换行\n            flex:1; //占据剩余宽度\n            .keywordItem{\n                display:flex;\n                background-color: #eee;\n                height: 0.55rem;\n                padding: 0 0.2rem;\n                align-items: center;\n                border-radius: 0.3rem;\n                font-size: 0.2rem;\n                margin:0 0.08rem 0.16rem 0.08rem;\n\n            }\n            .clearbtn{\n                font-size: 0.26rem;\n                color:#333;\n                margin:0.06rem 0rem 0.12rem 0.3rem;\n                text-decoration: underline;\n            }\n        }\n    }\n    .list{\n        .playItem{\n            display: flex;\n            justify-content: space-between;\n            padding:0.2rem;\n            .left{\n                display: flex;\n                align-items: center;\n                .index{\n                    color:rgb(120, 120, 120);\n                }\n                .content{\n                    margin-left:0.4rem;\n                    .title{\n                        font-size: 0.3rem;\n                        color:#333;\n                    }\n                    .author{\n                       font-size: 0.1rem;\n                       color:rgb(120, 120, 120); \n                       margin-top:0.02rem;\n                    }\n                }\n            }\n            .right{\n                display: flex;\n                align-items:center ;\n                .icon{\n                    width:0.4rem;\n                    height: 0.4rem;\n                    fill:#333;\n                    margin-left:0.2rem;\n                }\n            }\n        }\n    }\n}\n\n</style>\n\n<script>\n\nimport {searchMusic} from '@/api/index.js'\nimport {setPlayIndex} from '@/api/index.js'\nimport {mapMutations} from 'vuex';\n\nexport default {\n    props:['playlist'],\n    computed:{\n        ...mapState(['playlist','playCurrentIndex']),\n    },\n    methods:{\n        ...mapMutations(['setPlayIndex'])\n    },\n    data:()=>{\n        return{\n            placeholder:\"Racheal Yamagata\",\n            keywordList:['杨千嬅','方大同'],\n            searchKeyword:'',\n            searchSongs:[],\n        }\n    },\n    beforeMount(){\n        // localStorage.keywordList=\"\";\n        console.log(\"localStorage\",localStorage.keywordList)\n        this.keywordList=localStorage.keywordList? JSON.parse(localStorage.keywordList):this.keywordList;\n    },\n    methods:{\n        saveKeyword:async function(){\n            this.keywordList.push(this.searchKeyword);\n            this.keywordList=Array.from(new Set(this.keywordList));\n            if(this.keywordList.length>10){\n                this.keywordList=this.keywordList.slice(this.keywordList.length-10);\n            }\n            localStorage.keywordList=JSON.stringify(this.keywordList);\n            let result=await searchMusic(this.searchKeyword);\n            // console.log(\"search result:\",result)\n            this.searchSongs=result.data.result.songs;\n            console.log(this.searchSongs)\n            this.searchKeyword='';\n        },\n        clearStorage(){\n           localStorage.keywordList=\"\"; \n           this.keywordList=[];\n        },\n        setPlay(item){\n            item.al=item.album;\n            item.al.picUrl=item.album.artist.img1v1Url;\n            console.log(this.playlist)\n            this.$store.commit('pushPlaylist',item);\n            this.$store.commit('setPlayIndex',this.playlist.length-1)\n        }\n    }\n}\n</script>"]},"metadata":{},"sourceType":"module"}